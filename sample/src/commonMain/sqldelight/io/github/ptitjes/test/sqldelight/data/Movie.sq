CREATE TABLE movie (
    movie_id INTEGER NOT NULL PRIMARY KEY,
    synopsis_embedding BLOB NOT NULL
);

insertMovie:
INSERT INTO movie (movie_id, synopsis_embedding)
VALUES (:movieId, vec_f32(:embedding));

matchingMovies:
SELECT
    movie_id,
    1.0 - vec_distance_cosine(vec_f32(:embedding), synopsis_embedding) AS similarity
FROM movie
WHERE (NULL == :minSimilarity OR similarity >= :minSimilarity)
ORDER BY similarity DESC
LIMIT IFNULL(:count, 10);
